# RecBole 라이브러리 활용
RecBole은 Pytorch로 개발된 Recsys를 위한 라이브러리로, 70여 가지의 모델들을 쉽게 시험해볼 수 있다.  
그러나 다양한 모델이 작동하도록 하기 위해 RecBole은 고유한 데이터셋과 데이터로더를 활용하여 Data Flow를 구성하고 있고,
이에 따라 자유자재로 해당 라이브러리를 활용하기 위해서는 어느 정도 용법을 익힐 필요가 있다.  

## 환경 설치
주의! cuda가 제대로 작동하지 않는 경우가 있습니다. 이를 해결하기 위해 많이 삽질했는데, 정말 어쩌다가 해결이 되어버려서
어떻게 해결했는지 아직 알지 못합니다. 그래서 당장 제가 마지막에 성공한 설치 방식이 무엇인지만 기술해두겠습니다.
```
conda create -n recbole python=3.8.5
```
콘다 환경을 설치합니다. 파이썬 버전에 유의해주세요.
```
pip install -r req.txt
pip install -r requirements.txt
```
순서대로 requirements를 설치합니다. pandas 뭐라 문제가 생긴다면 setuptools 버전 이슈일 수도 있습니다.  
```
pip install -e . --verbose
```
Recbole 디렉에 들어와서 이 명렁어를 실행해주세요.

## 데이터 구성
```
python process_data.py
```
process_data.py에서 필요한 데이터를 만들도록 되어있습니다. 해당 파일을 통해 recbole에서 사용할 데이터를 만들어주세요.

## 실행하기
```
python general_model.py --model EASE
```
현재는 아직까지 general_model에 대해서만 학습을 실험해볼 수 있습니다. 심지어 아직은 모든 모델에 대해서 할 수 있는지도 
확인은 하지 못 했습니다. 조금 더 실험하고 커스텀하면서 실험할 수 있도록 만들겠습니다(아니면 같이 하쉴 분?). 

## submission 파일 만들기
```
python inference.py
```
inference.py를 통해 제출할 파일을 만듭니다. 제출할 파일은 output 디렉터리에 저장됩니다.

## 커스텀하기
모든 커스텀은 yaml 파일을 통해 진행할 수 있습니다. 그 안에 줄 수 있는 옵션들이 굉장히 많은데..  
안 속에 있는 것들 중에 낯익은 것들은 직접 수정해가시면서 하셔도 좋습니다. 막히는 부분이 있다면 물어봐주세요.  
주석을 마구 달기도 하고 마구 적어넣어서 더러운데 추후 조금 더 수정하겠습니다.  
참고로 py파일에서 config 변수에 직접 코드를 쳐가면서 수정을 해도 적용이 됩니다.
